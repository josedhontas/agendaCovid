{% load static %}

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}"/>
    <script src="https://kit.fontawesome.com/e73b592546.js" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <title>Document</title>
</head>

<body>
    <div class="container2">
        <div class="formulario">
            <h1>Agendamento</h1>
            <form action="" method="post">
                {% csrf_token %}
                <div class="grupo-entrada">
                    <label>Estabelecimento:</label>
                    <div class="campo-entrada">
                        <i class="fa-solid fa-building"></i>
                        <select name="cnes" required class="formulario-select">
                            <option value="Nenhum"> Nenhum</option>
                            {% for estabelecimento in dados_xml %}
                            <option value="{{ estabelecimento.cnes }}">{{ estabelecimento.nome }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <label>Data:</label>
                      <div class="campo-entrada">
                        <i class="fa-solid fa-calendar"></i>
                          <input type="date" placeholder="Data de Nascimento" name="dia" required>
                      </div>
                      <label>Horário:</label>
                  <div class="campo-entrada">
                    <i class="fa-solid fa-clock"></i>
                    <select name="horario" required class="formulario-select">
                        <option value="Nenhum">Nenhum</option>
                        <option value="{{ horario }}">{{ nome_horario }}</option>
                    </select>
                </div>


                </div>
                

                <div class="row justify-content-start my-4">
                  <div class="col">
                
                    <!-- Sucess messages -->
                    {% if messages %}
                    {% for message in messages %}
                      {%if message.tags == 'success' %}
                  <div class="alert alert-success alert-dismissible fade show " role="alert">
                    {{message}}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                      {% endif %}
                    {% endfor %}
                  {% endif %}
                  
                  <!-- Error Mesages -->
                  
                  {% if messages %}
              {% for message in messages %}
                {%if message.tags == 'error' %}
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
              <strong>Atenção!</strong> {{message}}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
                {% endif %}
              {% endfor %}
            {% endif %}
                <div class="botoes">
                    <button type="button" id="signinBtn" class="disable">Voltar</button>
                    <button type="submit" id="signupBtn">Agendar</button>
                </div>
            </formulario>
        </div>
    </div>


    <script>
        signinBtn.onclick = function () {
            signupBtn.classList.add("disable")
            signinBtn.classList.remove("disable")
            setTimeout(function() {
                window.location.href = "{% url 'pag_inicial' %}";
            }, 500);

        }

        signupBtn.onclick = function () {
            signinBtn.classList.add("disable")
            signupBtn.classList.remove("disable")
            setTimeout(function() {
                window.location.href =  "{% url 'visu_agendamento' %}";
            }, 1000);

        }
    </script>
</body>

</html>